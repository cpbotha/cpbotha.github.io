<!doctype html><html><head><title>Lush, OCaml and more // voices in my head</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=author content="Charl P. Botha"><meta property="og:title" content="Lush, OCaml and more"><meta property="og:description" content="I took a long hard look at the OCaml functional (well, mostly) language this weekend. One of the many interesting aspects of OCaml, is that, in addition to offering an interpreted environment, it comes with a REALLY good compiler. So, you can sit there prototyping your latest numerical trick and when you‚Äôre happy, you can compile the code to a blazingly fast native binary.
So, whilst reading up on all this, I remembered a question from the [Lush][2] (a lisp-like scientific languages that can also be compiled) [FAQ][3]: ‚ÄúHow does Lush compare to Matlab/Octave for speed?"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://cpbotha.net/2004/11/14/lush-ocaml-and-more/"><link rel="shortcut icon" href=/favicon.ico><link href=https://cpbotha.net/webfonts/ptserif/main.css rel=stylesheet type=text/css><link href=https://cpbotha.net/webfonts/source-code-pro/main.css rel=stylesheet type=text/css><style>@import 'https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,400;0,700;1,400;1,700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap'</style><link rel=stylesheet href=https://cpbotha.net/css/style.css><meta name=generator content="Hugo 0.101.0"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;></a>
<a id=logo class=logo-text href=https://cpbotha.net/>voices in my head</a><nav id=main-nav><a class=main-nav-link href=/about/>About</a>
<a class=main-nav-link href=/links/>Links</a>
<a class=main-nav-link href=/archive/>Posts Archive</a>
<a class=main-nav-link href=/software/>Software</a>
<a class=main-nav-link href=/following-this-blog/>Following this blog</a></nav><nav id=sub-nav><div id=search-form-wrap></div></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>Lush, OCaml and more</h1></header><div class=article-meta><a href=/2004/11/14/lush-ocaml-and-more/ class=article-date><time datetime=2004-11-14T15:32:17.000+00:00 itemprop=datePublished>2004-11-14</time></a><div class=post-categories><div class=article-category><a class=article-category-link href=https://cpbotha.net//categories/tech>tech</a>
<span>></span>
<a class=article-category-link href=https://cpbotha.net//categories/uncategorized>Uncategorized</a></div></div><div class=article-comment-link-wrap><a href=/2004/11/14/lush-ocaml-and-more/#isso-thread class=article-comment-link>Comments</a></div></div><div class=article-entry itemprop=articleBody><p>I took a long hard look at the <a href=http://www.ocaml.org/>OCaml</a> functional (well, mostly) language this weekend. One of the many interesting aspects of OCaml, is that, in addition to offering an interpreted environment, it comes with a REALLY good compiler. So, you can sit there prototyping your latest numerical trick and when you‚Äôre happy, you can compile the code to a blazingly fast native binary.</p><p>So, whilst reading up on all this, I remembered a question from the [Lush][2] (a lisp-like scientific languages that can also be compiled) [FAQ][3]: ‚ÄúHow does Lush compare to Matlab/Octave for speed?‚Äù. So the author then shows that Lush is like 50 billion times faster than Octave. (Go look.)</p><p>I implemented his little benchmark in Python, C, Octave and OCaml and tested the codes on a P4 2.4GHz running Ubuntu Linux. These were the performance figures for harmonic(1000000):</p><table border=1><tr><th>Language</th><th>Time (seconds)</th></tr><tr><td>Octave 2.1.57</td><td>7.894</td></tr><tr><td>Python 2.3.4</td><td>0.459</td></tr><tr><td>OCaml 3.08 interpreted</td><td>0.229</td></tr><tr><td>OCaml 3.08 compiled</td><td>0.021</td></tr><tr><td>gcc 3.3.4</td><td>0.017</td></tr></table><p>For each benchmark, I obviously called the harmonic() in a loop with sufficient iterations to yield accurate timings. For the compiled tests, 300 iterations did the trick. For Octave, 3 was more than enough. You can find my implementations by clicking [here][4].</p><p>This was really just for fun, in other words: DON‚ÄôT TAKE IT TOO SERIOUSLY. Also, the OCaml snippet I wrote is mostly imperative. However, the results reflect what is also shown by [The Great Computer Language Shootout][5]: OCaml is a good contender when one needs to write very fast code in a more advanced language than C.</p><p>[2]: a href=
[3]: <a href=http://lush.sourceforge.net/faq.html>http://lush.sourceforge.net/faq.html</a>
[4]: <a href=http://visualisation.tudelft.nl/~cpbotha/thingies/lushCompare/>http://visualisation.tudelft.nl/~cpbotha/thingies/lushCompare/</a>
[5]: <a href=http://shootout.alioth.debian.org/>http://shootout.alioth.debian.org/</a></p></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/harmonic>harmonic</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/lush>lush</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/ocaml>ocaml</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/octave>octave</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/psyco>psyco</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/python>python</a></li></ul></footer></div><nav id=article-nav><a href=/2004/11/27/phpbugtracker/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
phpBugTracker</div></a><a href=/2004/10/20/nexus-nx-3500-real-silent-power-supply/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>Nexus NX-3500 ‚ÄúReal Silent Power Supply‚Äù&nbsp;<span>></span></div></a></nav><div class=article-footer>Related posts:
<a href=/2003/07/21/itk-python-now-with-observers/>üå§ ITK Python Now With Observers!</a>
<a href=/2003/07/21/itk-python-now-with-exceptions/>üå§ ITK Python Now With Exceptions!</a>
<a href=/2003/06/19/swapping-variables-without-a-temporary/>üå§ Swapping variables without a temporary</a></div></article><style>.isso-comment .avatar img{max-width:100%}.isso-comment>div.text-wrapper>div.text p{margin-top:1em}</style><script data-isso=/isso/cpbotha.net/ data-isso-reply-notifications=true data-isso-avatar=false data-isso-gravatar=true data-isso-max-comments-nested=inf data-isso-max-comments-top=inf data-isso-require-email=true data-isso-vote=false src=/isso/cpbotha.net/js/embed.min.js></script><section data-title="Lush, OCaml and more" id=isso-thread></section></section><footer id=footer><div id=search-form-wrap><form class=search-form method=get action=https://duckduckgo.com/><input type=search name=q class=search-text placeholder title size=20 maxlength=128>
<input type=hidden name=sites value=cpbotha.net>
<input type=submit value="Search site with DDG" class=hidden></form></div><div class=outer><div id=footer-info class=inner>&copy; 2022 Charl P. Botha<br>Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a></div></div><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/solarized-light.min.css integrity=sha384-bFKDPkG3geCujYJIbPornilfOgmYQoPS45Oh/8daqqo1SUwNY06OeHorpgnNvx82 crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script>
<script>hljs.initHighlightingOnLoad()</script><script>document.getElementById("main-nav-toggle").addEventListener("click",function(){var e=document.getElementById("header");e.classList.contains("mobile-on")?e.classList.remove("mobile-on"):e.classList.add("mobile-on")})</script></footer></div></body></html>