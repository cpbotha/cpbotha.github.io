<!doctype html><html><head><title>Hivemind / Proximity: Distributed interactive personal lighting art project at AfrikaBurn 2018 // voices in my head</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="Hivemind / Proximity: Distributed interactive personal lighting art project at AfrikaBurn 2018"><meta property="og:description" content="At AfrikaBurn 2018, the South African / Dutch theme camp Burniversity (that&rsquo;s us!) was again present and active with a
range of workshops and other learning experiences.
(Strangely, although I wrote vaguely about our AB 2018 experience on this blog shortly after the
event, I did not even mention this electronics
project, and now it&rsquo;s only taken 6 years to get around to the nerdy bits.)
That year, we had perhaps a bit too much energy and decided to design an electronic artwork, inspired by the fun we had
in 2017 with a giant bottle of helium, a bag of CR2032 button cell batteries and leds, and another bag full of
helium-grade balloons. (In short: On the less windy nights, we would inflate clusters of 4 to 5 balloons with helium,
each with a burning led inside, and attach the cluster to a theme camp member. Picture little clouds of illuminated
helium balloons floating above their humans as they were roaming over the Binnekring.)"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/"><meta property="og:image" content="https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/afrikaburn-2018_hu_fdc3b1819b8802f6.webp"><link rel="shortcut icon" href=/favicon.ico><link href=https://cpbotha.net/webfonts/ptserif/main.css rel=stylesheet type=text/css><link href=https://cpbotha.net/webfonts/source-code-pro/main.css rel=stylesheet type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,400;0,700;1,400;1,700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap"><link rel=stylesheet href=https://cpbotha.net/css/style.css><meta name=generator content="Hugo 0.153.2"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;></a><a id=logo class=logo-text href=https://cpbotha.net/>voices in my head</a><nav id=main-nav><a class=main-nav-link href=/about/>About</a>
<a class=main-nav-link href=/links/>Links</a>
<a class=main-nav-link href=/archive/>Posts Archive</a>
<a class=main-nav-link href=/software/>Software</a>
<a class=main-nav-link href=/following-this-blog/>Following this blog</a></nav><nav id=sub-nav><div id=search-form-wrap></div></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>Hivemind / Proximity: Distributed interactive personal lighting art project at AfrikaBurn 2018</h1></header><div class=article-meta><a href=/2024/08/10/afrikaburn-2018-hivemind-proximity/ class=article-date><time datetime=2024-08-10T23:10:00.000+02:00 itemprop=datePublished>2024-08-10</time></a><div class=post-categories><div class=article-category><a class=article-category-link href=https://cpbotha.net//categories/tech>tech</a></div></div><div class=article-comment-link-wrap><a href=/2024/08/10/afrikaburn-2018-hivemind-proximity/#isso-thread class=article-comment-link>Comments</a></div></div><div class=article-entry itemprop=articleBody><p>At AfrikaBurn 2018, the South African / Dutch theme camp Burniversity (that&rsquo;s us!) was again present and active with a
range of workshops and other learning experiences.</p><p>(Strangely, although <a href=/2018/05/09/weekly-head-voices-141-albert-was-burning-really-hard/>I wrote vaguely about our AB 2018 experience on this blog shortly after the
event</a>, I did not even mention this electronics
project, and now it&rsquo;s only taken 6 years to get around to the nerdy bits.)</p><p>That year, we had perhaps a bit too much energy and decided to design an electronic artwork, inspired by the fun we had
in 2017 with a giant bottle of helium, a bag of CR2032 button cell batteries and leds, and another bag full of
helium-grade balloons. (In short: On the less windy nights, we would inflate clusters of 4 to 5 balloons with helium,
each with a burning led inside, and attach the cluster to a theme camp member. Picture little clouds of illuminated
helium balloons floating above their humans as they were roaming over the Binnekring.)</p><p>I was the main hardware and software designer of our 2018 electronic artwork, eventually titled &ldquo;Hivemind / Proximity&rdquo;,
and now the main topic of this post. Friend PK helped a lot in the earlier stages coming up with ideas, and building
test versions of my hardware and software designs, and later constructing the 7 production (haha) units, both at home
and in the desert, where we got additional help from more of our AfrikaBurn besties.</p><p>For some or other reason, we were less interested in taking photos and making movies, so I&rsquo;ve had to scratch around to
find illustrative media for this post.</p><h2 id=the-final-product>The final product</h2><p>In the end we had seven people (that&rsquo;s all of us) walking around the desert, each with a 25cm diameter circle of
coloured leds on their chest and a battery-powered arduino based controller on their waist that was in wireless
communication with all of the other units, with a range of a few hundred metres.</p><p>On each of the chest circles, each of the other team members was represented by a globally consistently coloured light
orbiting at a rate correlating with how close that team member was. The further away that team member went, the slower
their colour would rotate, until the units lost communication, at which point that member&rsquo;s light would start rotating
faster and faster in the opposite direction.</p><p>Once that team member came back in range, their light would start orbiting in the &ldquo;right&rdquo; direction, and would orbit
faster as they got closer.</p><p>This proximity visualization worked independently for each pair of team members, and hence for the group as a whole, as
you can hopefully imagine.</p><p>This early demo gives a good idea of what the animation looked like:
<video src=circling-leds.mp4 controls></p><p>The following extremely shaky video shows the assembled units, all happy as they are close to each other, shortly after
we did the final assembly in the raging Tankwa desert winds and dust. Here you can also see the effect of the diffuse
tubing that we put the leds in: <video src=circling-leds-assembled.mp4 controls></p><p>Finally, the following photo shows a partially assembled unit consisting of arduino, xbee shield, xbee radio and the
battery pack on the side with 4 x 1.5V AA batteries. Friend PK sourced a number of nylon dog treat bags, which were just
big enough to take the boards + battery pack and thus serve as our super professional production packaging.<figure><a href=assembly.jpg><img sizes="(min-width: 35em) 1200px, 100vw" srcset='https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/assembly_hu_d2beac0d5222f3b6.jpg 480w,
https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/assembly_hu_eec59e2a25d30800.jpg 800w,
https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/assembly_hu_8d680cadefcc37a.jpg 1200w,
https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/assembly_hu_732c04b6a231f405.jpg 1500w,' src=https://cpbotha.net/2024/08/10/afrikaburn-2018-hivemind-proximity/assembly_hu_eec59e2a25d30800.jpg></a></figure></p><h2 id=hardware>Hardware</h2><ul><li><a href=https://robotdyn.com/samd21-m0.html>Robotdyn SAMD21 M0</a>: ARM Cortex M0 32bit Arduino clone. Fast enough to animate the LEDs while communicating with all other units and keeping track of their proximity.</li><li><a href=https://www.digi.com/products/models/xb24cawit-001>XBee S2C XB24CAWIT-001 radio for 802.15.4</a>: For wireless communication comms and RSSI feedback between units</li><li><a href=https://vxlabs.com/2018/03/23/which-jumper-to-set-on-the-itead-xbee-shield-v1-1-for-use-with-a-3-3v-arduino/>ITEAD Studio XBee shield v1.1</a>: To mount XBee onto the Arduino. I&rsquo;ve linked to my vxlabs blog post about this unit, because it has important info re jumper configuration which can save you much time.</li><li><a href=https://www.amazon.com/icever-WS2812B-MagicRGB-LED-Strip/dp/B0CFTP3S41/>A few metres of 60/m WS2812B programmable LED strips (5V, 3 wire)</a></li><li><a href=https://www.robotics.org.za/LEVEL-4P>4 channel 3.3V to 5V logic level shifter (LEVEL-4P, BOB-12009)</a>: Convert 3.3V SAMD21 output to 5V required for programmable LEDs data line (durn&mldr;)</li></ul><p>Getting all 7 of these units built and programmed, the final few in the desert at dusk of day 2 at the Burn, was quite a
challenge, requiring a gas powered soldering iron and liberal application of WvdL&rsquo;s (aka Broken Pipe) glue gun.</p><p>Especially the 3.3V to 5V level shifter added unnecessary complexity to the already precarious connection from power supply and controller board to the LED circle.</p><h3 id=the-rssi-proximity-trick>The RSSI proximity &ldquo;trick&rdquo;</h3><p>The SAMD21 is the electronic heart of the system.</p><p>It runs a special programme (see next section) that uses the XBee radio to broadcast a packet to the 802.15.4 wireless private area network (PAN), consisting of all of the units, every 1.5 seconds. It also listens, via the XBee radio, for any incoming packets.</p><p>Each incoming packet contains its sending ID.</p><p>Along with that packet, we also get the RSSI, which is an indicator of signal strength.</p><p>That RSSI is also a pretty good measurement of the <em>proximity</em> of the two units, and by proxy of their wearers.</p><p>If we are standing facing each other, the RSSI will be high. If I turn my back to you, the RSSI will be a bit lower. If I walk away from you, it will become lower still.</p><p>So, each unit maintains a list of IDs with the last known RSSI, and also when it last received a packet from that ID. It uses the RSSI to visualize proximity (that person&rsquo;s colour orbits faster the closer they are), and the age to detect person lost contact (orbits faster and faster in the other direction).</p><h2 id=software>Software</h2><p>You can find the full commented <a href=https://github.com/cpbotha/ab-hivemind>C++ source code for this project on my github</a>.</p><p>Please do take a quick browse through the code as well, but here are some noteworthy learnings and observations:</p><ul><li>You can use this code for any number of wearable units (people), just remember to set <code>XBEE_SWARM_SIZE</code>.</li><li>It took me so much time to get 100% reliable communication from the SAMD21 with the XBee. This was probably the
biggest technical stumbling block. Besides documentation issues (see ITEAD linked post above), it the solution was to
be super patient with the XBee. You&rsquo;ll see in the code, function <code>addressRead()</code>, that we just keep on trying, with
generous waits, until we get a successful link.</li><li>Like any good datavis practitioner, I opted for a color scheme from <a href=https://colorbrewer2.org/>ColorBrewer2</a>.</li><li>As you can see in the main <code>loop()</code>, the paint loop is <em>lazy</em> and hence efficient, with three main event handlers
triggering at different intervals of the arduino clock. This includes the 60fps LED animator, obviously triggering at
the notorious 16ms interval. I used the fantastic <code>EVERY_N_MILLIS</code> macro from the even more fantastic <a href=https://fastled.io/>FastLED
animation library</a>.</li></ul><h2 id=conclusion>Conclusion</h2><p>In spite of desert soldering, glue-gun glue and duct tape holding everything together, all units worked in the pitch
dark of the desert, and were at times even used, quite effectively, to locate <em>utterly</em> lost team members in the
otherwise utterly reception-free environment.</p><p>If we ever do a v2 of this, we would produce a single board, with the smallest possible number of connections to
lighting and power.</p><p>Taking all of this into account, but especially thanks to our Burniversity peeps who were so positively curious and
willing to pour their energy into the difficult performance part, this was such a beautiful and worthwhile endeavour.</p></div><div class=article-toc><h3>Contents</h3><nav id=TableOfContents><ul><li><ul><li><a href=#the-final-product>The final product</a></li><li><a href=#hardware>Hardware</a><ul><li><a href=#the-rssi-proximity-trick>The RSSI proximity &ldquo;trick&rdquo;</a></li></ul></li><li><a href=#software>Software</a></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/afrikaburn>afrikaburn</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/arduino>arduino</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://cpbotha.net//tags/c++>c++</a></li></ul></footer></div><nav id=article-nav><a href=/2024/11/17/weekly-head-voices-255-you-lift-me-up/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp; Weekly Head Voices #255: You lift me up</div></a><a href=/2024/03/31/weekly-head-voices-254-ratio/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>Weekly Head Voices #254: Ratio&nbsp;<span>></span></div></a></nav><div class=article-footer>Related posts:
<a href=/2018/03/04/weekly-head-voices-134/>ðŸŒ¤ Weekly Head Voices #134: SCARF.</a>
<a href=/2022/05/23/weekly-head-voices-242-multiplicity-of-me/>ðŸŒ¤ Weekly Head Voices #242: Multiplicity of me</a>
<a href=/2020/11/29/weekly-head-voices-210-miniburn-2020/>ðŸŒ¤ Weekly Head Voices #210: MiniBurn 2020</a></div></article><style>.isso-comment .avatar img{max-width:100%}.isso-comment>div.text-wrapper>div.text p{margin-top:1em}</style><script data-isso=/isso/cpbotha.net/ data-isso-reply-notifications=true data-isso-avatar=false data-isso-gravatar=true data-isso-max-comments-nested=inf data-isso-max-comments-top=inf data-isso-require-email=true data-isso-vote=false src=/isso/cpbotha.net/js/embed.min.js></script><section data-title="Hivemind / Proximity: Distributed interactive personal lighting art project at AfrikaBurn 2018" id=isso-thread></section></section><footer id=footer><div id=search-form-wrap><form class=search-form method=get action=https://duckduckgo.com/><input type=search name=q class=search-text placeholder title size=20 maxlength=128>
<input type=hidden name=sites value=cpbotha.net>
<input type=submit value="Search site with DDG" class=hidden></form></div><div class=outer><div id=footer-info class=inner>&copy; 2025 voices in my head<br>Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme
<a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a></div></div><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/solarized-light.min.css integrity=sha384-bFKDPkG3geCujYJIbPornilfOgmYQoPS45Oh/8daqqo1SUwNY06OeHorpgnNvx82 crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad()</script><script>document.getElementById("main-nav-toggle").addEventListener("click",function(){var e=document.getElementById("header");e.classList.contains("mobile-on")?e.classList.remove("mobile-on"):e.classList.add("mobile-on")})</script></footer></div></body></html>