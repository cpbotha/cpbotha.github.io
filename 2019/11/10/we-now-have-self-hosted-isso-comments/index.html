<!doctype html><html>
<head>
<title>We now have self-hosted isso comments // voices in my head</title>
<meta charset=utf-8>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name=author content="Charl P. Botha">
<meta property="og:title" content="We now have self-hosted isso comments">
<meta property="og:description" content="As one is prone to do on a Saturday, I decided yesterday to migrate all 2500+ of the comments on this site to isso, an open-source self-hosted commenting system.
TL;DR: Comments on this blog are now managed by self-hosted, open-source isso that I control. Commenting should be much faster and more fun, so have at it!
Why I recommend strongly against Disqus. You might recall, or you could just check the relevant blog post, that I ported all comments from wordpress to disqus (grrr&mldr;) in March of this year, when I upgraded to the Hugo static site generator.">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="https://cpbotha.net/2019/11/10/we-now-have-self-hosted-isso-comments/">
<link rel="shortcut icon" href=/favicon.ico>
<link href=https://cpbotha.net/webfonts/ptserif/main.css rel=stylesheet type=text/css>
<link href=https://cpbotha.net/webfonts/source-code-pro/main.css rel=stylesheet type=text/css>
<style>@import 'https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,700&display=swap'</style>
<link rel=stylesheet href=https://cpbotha.net/css/style.css>
<meta name=generator content="Hugo 0.88.1">
</head>
<body>
<div id=container>
<header id=header>
<div id=header-outer class=outer>
<div id=header-inner class=inner>
<a id=main-nav-toggle class=nav-icon href=javascript:;></a>
<a id=logo class=logo-text href=https://cpbotha.net/>voices in my head</a>
<nav id=main-nav>
<a class=main-nav-link href=/about/>About</a>
<a class=main-nav-link href=/links/>Links</a>
<a class=main-nav-link href=/archive/>Posts Archive</a>
<a class=main-nav-link href=/software/>Software</a>
<a class=main-nav-link href=/following-this-blog/>Following this blog</a>
</nav>
<nav id=sub-nav>
<div id=search-form-wrap>
</div>
</nav>
</div>
</div>
</header>
<section id=main class=outer>
<article class="article article-type-post" itemscope itemprop=blogPost>
<div class=article-inner>
<header class=article-header>
<h1 class=article-title itemprop=name>We now have self-hosted isso comments</h1>
</header>
<div class=article-meta>
<a href=/2019/11/10/we-now-have-self-hosted-isso-comments/ class=article-date>
<time datetime=2019-11-10T16:28:00.000+02:00 itemprop=datePublished>2019-11-10</time>
</a>
<div class=post-categories>
<div class=article-category>
<a class=article-category-link href=https://cpbotha.net//categories/howto>howto</a>
</div>
</div>
<div class=article-comment-link-wrap>
<a href=/2019/11/10/we-now-have-self-hosted-isso-comments/#isso-thread class=article-comment-link>Comments</a>
</div>
</div>
<div class=article-entry itemprop=articleBody>
<p>As one is prone to do on a Saturday, I decided yesterday to migrate all 2500+
of the comments on this site to isso, an open-source self-hosted commenting
system.</p>
<p>TL;DR: Comments on this blog are now managed by self-hosted, open-source isso
that I control. Commenting should be much faster and more fun, so have at it!</p>
<h2 id=why-i-recommend-strongly-against-disqus>Why I recommend strongly against Disqus.</h2>
<p>You might recall, or you could just check <a href=/2019/03/31/wordpress-to-hugo/#transfer-comments-to-disqus>the relevant blog
post</a>, that I
ported all comments from wordpress to disqus (grrr&mldr;) in March of this year,
when I upgraded to the Hugo static site generator.</p>
<p>At that point, I had already poured quite some time into the Hugo migration,
and so I thought that trying out Disqus for a while, on a personal site without
any ads whatsoever, couldn&rsquo;t hurt.</p>
<p>I could always at a later stage simply export my comments from there, right?</p>
<p>Wrong.</p>
<p>I triggered the built-in export-functionality in the Disqus admin interface.</p>
<p>The site then shows a message that it will email you when the export is ready.</p>
<p>Well, it&rsquo;s now 24 hours later and that email never came&mldr;</p>
<p>(I retried at least 3 times. I even <a href=https://twitter.com/cvoxel/status/1193181451002482690>tweeted at
them</a>, because there&rsquo;s
no other way to contact support.)</p>
<p>When you read the fineprint on <a href=https://help.disqus.com/en/articles/1717199-importing-exporting#exporting-from-disqus>the relevant help
page</a>,
you see the following (emphasis mine):</p>
<blockquote>
<p>Please note: exports <strong>may not be available for all sites</strong>, particularly
those of a large size. If you&rsquo;ve requested an export file more than twice and
still have not received a download link from us, it&rsquo;s likely that an export
for your site is <strong>currently unavailable</strong>.</p>
</blockquote>
<p>So that&rsquo;s pretty reassuring! You <em>might</em> get an export. It depends&mldr; Whatever
the case may be, you <em>won&rsquo;t</em> get any sort of feedback however.</p>
<p>I guess this is an issue with any hosted solution.</p>
<p>However, one would expect from any such service that advertises the possibility
to export one&rsquo;s <em>own data</em>, even on the free tier, that one is in fact
<em>allowed</em> to export one&rsquo;s own data.</p>
<p>NOT IN DISQUS WORLD!</p>
<p>Anyways, I was not going to let this highly disappointing performance stop my
migration efforts.</p>
<h2 id=enter-isso>Enter isso!</h2>
<p>After discovering that the open-source self-hosted <a href=https://gitlab.com/commento/commento>commento
software</a> requires at least Postgres 9.5
but webfaction (my webhoster for years and years now, unfortunately our ways
will probably have to part thanks to the godaddy acquisition) is stuck at
Postgres 9.4, I decided to configure isso, the same <a href=https://vxlabs.com/2019/04/06/isso-on-webfaction/>commenting system I have
running on vxlabs</a>.</p>
<h3 id=new-feature-auto-approve-previously-approved-authors>New feature: Auto-approve previously approved authors.</h3>
<p>However, to make it a little more interesting, I decided to implement an
auto-moderation feature in isso that I used to use in all my wordpress
installations:</p>
<p><em>Auto-approve authors who have had comments approved in the past N months</em>.</p>
<p>Long story short, you can find my work in <a href=https://github.com/cpbotha/isso/commits/cpbotha-auto-moderate-known-authors>this github fork of
isso</a>.</p>
<p>I will soon create a PR into the main repo. It might or might not get accepted.</p>
<p>Simply edit the <code>moderation</code> section of your <code>isso.cfg</code> to look something like
the following:</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#859900>[moderation]</span>
<span style=color:#268bd2>enabled</span> = <span style=color:#2aa198>true</span>
<span style=color:#268bd2>activate-if-email-previously-approved</span> = <span style=color:#2aa198>true</span>
</code></pre></div><p>When someone leaves a comment, and their email address has had a comment
approved within the last 6 months, the new comment will be automatically
activated.</p>
<p>The advantage of this feature is that comment-conversations can happen much
more fluidly, without me having to approve each and every comment that comes
in.</p>
<h3 id=migrating-comments-in-spite-of-disqus>Migrating comments in spite of Disqus.</h3>
<p>In NormalWorld, I would have exported an XML from Disqus, and just imported
that into isso using the built-in functionality.</p>
<p>However, in DisqusWorld, the user has to suffer.</p>
<p>Fortunately I could import the bulk of the old comments (up to March of this
year) using the old Wordpress site export and isso&rsquo;s great import function.</p>
<p>For the remaining 25 comments, I manually copied each and every one of them,
along with author name, email (if I knew it) and exact date, and then inserted
them manually into the isso sqlite database, using the amazing
<a href=https://sqlitebrowser.org/>sqlitebrowser</a>.</p>
<p>I discovered three possibly useful facts:</p>
<ul>
<li>If the <code>parent</code> column in a <code>comment</code> record is not set explicitly to <code>NULL</code>
in the case of no parent, the comment does not show up.</li>
<li>Isso supports only one level of nesting in the database. This means the
<code>parent</code> column has to point to a root, i.e. parent-less, comment.</li>
<li>Isso stores timestamps as seconds since epoch. You can use the following SQL
to convert a timestring to seconds since epoch:</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#859900>select</span> <span style=color:#268bd2>strftime</span>(<span style=color:#2aa198>&#34;%s&#34;</span>, <span style=color:#2aa198>&#34;2019-08-22 14:11&#34;</span>);
</code></pre></div><p>I was up until 01:00 getting all of this running smoothly.</p>
<p>That is how much I love this blog and its people. :D</p>
<h2 id=conclusions>Conclusions.</h2>
<p>I am happy that all of your comments are now self-hosted on this server using
open-source software that I have a good grasp of.</p>
<p>I am happy that your valuable thoughts are backed up each and every night.</p>
<p>You should also notice that pages load much faster (disqus is quite slow).</p>
<p>(Also: MARKDOWN!)</p>
<p>Ok folks, I hope this further diminishes any barriers that there might have
been to you leaving us a message now and then!</p>
</div>
<div class=article-toc>
<h3>Contents</h3>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#why-i-recommend-strongly-against-disqus>Why I recommend strongly against Disqus.</a></li>
<li><a href=#enter-isso>Enter isso!</a>
<ul>
<li><a href=#new-feature-auto-approve-previously-approved-authors>New feature: Auto-approve previously approved authors.</a></li>
<li><a href=#migrating-comments-in-spite-of-disqus>Migrating comments in spite of Disqus.</a></li>
</ul>
</li>
<li><a href=#conclusions>Conclusions.</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<footer class=article-footer>
<ul class=article-tag-list>
<li class=article-tag-list-item>
<a class=article-tag-list-link href=https://cpbotha.net//tags/blog>blog
</a>
</li>
<li class=article-tag-list-item>
<a class=article-tag-list-link href=https://cpbotha.net//tags/comments>comments
</a>
</li>
<li class=article-tag-list-item>
<a class=article-tag-list-link href=https://cpbotha.net//tags/disqus>disqus
</a>
</li>
<li class=article-tag-list-item>
<a class=article-tag-list-link href=https://cpbotha.net//tags/isso>isso
</a>
</li>
</ul>
</footer>
</div>
<nav id=article-nav>
<a href=/2019/11/12/weekly-head-voices-183-wave-functions-wearing-lycra/ id=article-nav-newer class=article-nav-link-wrap>
<div class=article-nav-title><span>&lt;</span>&nbsp;
Weekly Head Voices #183: Wave functions wearing lycra.
</div>
</a>
<a href=/2019/11/04/weekly-head-voices-182-can-you-predict-what/ id=article-nav-older class=article-nav-link-wrap>
<div class=article-nav-title>Weekly Head Voices #182: Can you predict what ...&nbsp;<span>></span></div>
</a>
</nav>
<div class=article-footer>
Related posts:
<a href=/2019/04/08/weekly-head-voices-168-postcards-from-the-edge/>ðŸŒ¤ Weekly Head Voices #168: Postcards from the edge.</a>
</div>
</article>
<style>.isso-comment .avatar img{max-width:100%}.isso-comment>div.text-wrapper>div.text p{margin-top:1em}</style>
<script data-isso=/isso/cpbotha.net/ data-isso-reply-notifications=true data-isso-avatar=false data-isso-gravatar=true data-isso-max-comments-nested=inf data-isso-max-comments-top=inf data-isso-require-email=true data-isso-vote=false src=/isso/cpbotha.net/js/embed.min.js></script>
<section data-title="We now have self-hosted isso comments" id=isso-thread></section>
</section>
<footer id=footer>
<div id=search-form-wrap>
<form class=search-form method=get action=https://duckduckgo.com/>
<input type=search name=q class=search-text placeholder title size=20 maxlength=128>
<input type=hidden name=sites value=cpbotha.net>
<input type=submit value="Search site with DDG" class=hidden>
</form>
</div>
<div class=outer>
<div id=footer-info class=inner>
&copy; 2021 Charl P. Botha
<br>
Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a>
</div>
</div>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/solarized-light.min.css integrity=sha384-bFKDPkG3geCujYJIbPornilfOgmYQoPS45Oh/8daqqo1SUwNY06OeHorpgnNvx82 crossorigin=anonymous>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var a=document.getElementById('header');a.classList.contains('mobile-on')?a.classList.remove('mobile-on'):a.classList.add('mobile-on')})</script>
</footer>
</div>
</body>
</html>